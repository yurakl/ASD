Програма для конвертації bmp зображення із кольорової схеми RGB-888 в RGB-555

Пікселі у вхідному файлі представлені у вигляді масиву типу uint8_t (unsigned char):

24 бітне (трьохбайтове кодування):


			uint8_t pixelData  =  [0] blue, [1] green,  [2] blue, [3] blue, [4] green, [5] red і тд.

				 або:  [0], [1],[2] -  перший піксель, [3],[4],[5] - другий піксель, і тд.
     
Тобто, для зчитування одного пікселя, трьох кольорів, нам необхідно зчитати три елементи масиву.

Якщо кодування 4-х байтне, то четвертим пікселем іде прозорість - її ігноруємо

В циклі оголошуються три змінні для тимчасового збереження кольорів пікселя

			unsigned char blue;
   
			unsigned char green;
   
			unsigned char red;
   
Далі в циклі, на кожні ітерації записуємо значення кольорів із вхідного масиву:

Якщо кодування пікселя трьохбайтне:
			if (infoHeaderIn.bitsPerPixel == 24) {
   
				blue  = pixelData[j];
    
				green = pixelData[j + 1];
    
				red   = pixelData[j + 2];
    
				//~ 3 елементи вхідного масиву зчитані - ітератор збільшуємо на 3
				j += 3;
Якщо кодування чотирьохбайтне. Прозорість (alpha) ігноруємо:
			} else if (infoHeaderIn.bitsPerPixel == 32) {
   
				blue  = pixelData[j + 0];
    
				green = pixelData[j + 1];
    
				red   = pixelData[j + 2];
    
				//~ 4 елементи вхідного масиву зчитані - ітератор збільшуємо на 4
				j += 4;
			}

Для тимчасового зберігання значення вихідного пікселя ( він займає два байти), використовується змінна типу uint16_t:
unsigned short tmp_pixel = 0;

Далі в програмі йде просте перетворення із RGB888 у RGB555:
Просте перетворення з RGB888 в RGB555 (двобайтне кодування) 

			tmp_pixel = SET_BLUE(blue) | SET_GREEN(green) | SET_RED(red);
   
Ви можете закоментувати це перетворення та розкоментувати одне із наступних, наприклад, із інверсією зеленого на синій:

			tmp_pixel = SET_BLUE(green) | SET_GREEN(blue) | SET_RED(red);


В програмі заданий вихідний файл aster.bmp
Якщо ви бажаєте змінити інший файл типу bmp, помістіть його у папку з програмою, та зробіть заміни у рядку з присвоєнням назви вхідного файлу:

			const char *filename = "aster.bmp";
